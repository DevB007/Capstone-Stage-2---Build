commit c7315787d0aa4febb6c0b15a44bbe174f8fbdf7a
Author: Deepankar <deepankar@vitamap.com>
Date:   Sun Apr 16 16:06:27 2017 +0530

    Removed Realm DB.

diff --git a/app/build.gradle b/app/build.gradle
index 8e6f875..457b91a 100644
--- a/app/build.gradle
+++ b/app/build.gradle
@@ -1,5 +1,4 @@
 apply plugin: 'com.android.application'
-apply plugin: 'realm-android'
 
 android {
     signingConfigs {
@@ -44,6 +43,7 @@ dependencies {
     compile "com.google.android.gms:play-services-maps:$GPLAY_VERSION"
     compile "com.google.firebase:firebase-ads:$GPLAY_VERSION"
     compile "com.google.android.gms:play-services-places:$GPLAY_VERSION"
+
     testCompile 'junit:junit:4.12'
 }
 
diff --git a/app/src/main/java/com/example/deveshwar/imalive/AlarmReceiver.java b/app/src/main/java/com/example/deveshwar/imalive/AlarmReceiver.java
index fdb89bc..74e1bf1 100644
--- a/app/src/main/java/com/example/deveshwar/imalive/AlarmReceiver.java
+++ b/app/src/main/java/com/example/deveshwar/imalive/AlarmReceiver.java
@@ -9,19 +9,16 @@ import org.json.JSONObject;
 
 import java.util.ArrayList;
 import java.util.Calendar;
-
-import io.realm.Realm;
-import io.realm.RealmResults;
+import java.util.List;
 
 public class AlarmReceiver extends BroadcastReceiver {
 
-    private Realm realm;
     private ArrayList<Integer> reminderDeliveryDays = new ArrayList<>();
 
     @Override
     public void onReceive(Context context, Intent intent) {
-        realm = Realm.getDefaultInstance();
-        RealmResults<Reminder> reminders = realm.where(Reminder.class).findAll();
+        // TODO read reminders from db
+        List<Reminder> reminders = new ArrayList<>();
         Reminder reminder;
         String deliveryTime[];
         JSONObject deliveryDays;
diff --git a/app/src/main/java/com/example/deveshwar/imalive/BootReceiver.java b/app/src/main/java/com/example/deveshwar/imalive/BootReceiver.java
index e9f91f0..4432287 100644
--- a/app/src/main/java/com/example/deveshwar/imalive/BootReceiver.java
+++ b/app/src/main/java/com/example/deveshwar/imalive/BootReceiver.java
@@ -4,17 +4,17 @@ import android.content.BroadcastReceiver;
 import android.content.Context;
 import android.content.Intent;
 
-import io.realm.Realm;
-import io.realm.RealmResults;
+import java.util.ArrayList;
+import java.util.List;
+
 
 public class BootReceiver extends BroadcastReceiver {
 
-    private Realm realm;
 
     public void onReceive(Context context, Intent intent) {
         if (intent.getAction().equals(Intent.ACTION_BOOT_COMPLETED)) {
-            realm = Realm.getDefaultInstance();
-            RealmResults<Reminder> reminders = realm.where(Reminder.class).findAll();
+            // TODO read reminders from db
+            List<Reminder> reminders = new ArrayList<>();
             Reminder reminder;
             String deliveryTime[];
 
diff --git a/app/src/main/java/com/example/deveshwar/imalive/IMaliveApplication.java b/app/src/main/java/com/example/deveshwar/imalive/IMaliveApplication.java
index d1004ed..481c750 100644
--- a/app/src/main/java/com/example/deveshwar/imalive/IMaliveApplication.java
+++ b/app/src/main/java/com/example/deveshwar/imalive/IMaliveApplication.java
@@ -2,15 +2,10 @@ package com.example.deveshwar.imalive;
 
 import android.app.Application;
 
-import io.realm.Realm;
-import io.realm.RealmConfiguration;
-
 public class IMaliveApplication extends Application {
 
     @Override
     public void onCreate() {
         super.onCreate();
-        RealmConfiguration config = new RealmConfiguration.Builder(this).build();
-        Realm.setDefaultConfiguration(config);
     }
 }
diff --git a/app/src/main/java/com/example/deveshwar/imalive/IMaliveRemoteViewsFactory.java b/app/src/main/java/com/example/deveshwar/imalive/IMaliveRemoteViewsFactory.java
index dcf9974..868abb0 100644
--- a/app/src/main/java/com/example/deveshwar/imalive/IMaliveRemoteViewsFactory.java
+++ b/app/src/main/java/com/example/deveshwar/imalive/IMaliveRemoteViewsFactory.java
@@ -16,12 +16,9 @@ import java.util.Iterator;
 import java.util.List;
 import java.util.Locale;
 
-import io.realm.Realm;
-
 public class IMaliveRemoteViewsFactory implements RemoteViewsService.RemoteViewsFactory {
     private Context mContext;
     private int mAppWidgetId;
-    private Realm realm;
     private List<Reminder> mReminders;
 
     public IMaliveRemoteViewsFactory(Context context, Intent intent) {
@@ -112,25 +109,7 @@ public class IMaliveRemoteViewsFactory implements RemoteViewsService.RemoteViews
 
     private void initReminders() {
         mReminders = new ArrayList<>();
-        realm = Realm.getInstance(mContext);
-        realm.refresh();
-
-        // workaround for accessing Realm objects on a different thread
-        List<Reminder> remindersList = realm.where(Reminder.class).findAll();
-        List<Reminder> reminderListClone = new ArrayList<>();
-        for (Reminder reminder : remindersList) {
-            Reminder tempReminder = new Reminder();
-            tempReminder.setId(reminder.getId());
-            tempReminder.setText(reminder.getText());
-            tempReminder.setContactName(reminder.getContactName());
-            tempReminder.setContactNumber(reminder.getContactNumber());
-            tempReminder.setContactPhoto(reminder.getContactPhoto());
-            tempReminder.setDeliveryTime(reminder.getDeliveryTime());
-            tempReminder.setDeliveryDays(reminder.getDeliveryDays());
-            reminderListClone.add(tempReminder);
-        }
-
-        mReminders = reminderListClone;
+        //TODO read from db
     }
 
 }
\ No newline at end of file
diff --git a/app/src/main/java/com/example/deveshwar/imalive/MainActivity.java b/app/src/main/java/com/example/deveshwar/imalive/MainActivity.java
index a6a8881..cb9560b 100644
--- a/app/src/main/java/com/example/deveshwar/imalive/MainActivity.java
+++ b/app/src/main/java/com/example/deveshwar/imalive/MainActivity.java
@@ -15,16 +15,15 @@ import android.view.View;
 import com.google.android.gms.ads.AdRequest;
 import com.google.android.gms.ads.AdView;
 
-import io.realm.Realm;
-import io.realm.RealmResults;
+import java.util.ArrayList;
+import java.util.List;
 
 public class MainActivity extends AppCompatActivity {
 
     private AdView mAdView;
     private static final int PICK_CONTACT_REQUEST_CODE = 0;
-    private Realm realm;
-    private RealmResults<Reminder> reminders;
     private RemindersAdapter adapter;
+    private List<Reminder> reminders;
 
     @Override
     protected void onCreate(Bundle savedInstanceState) {
@@ -35,8 +34,8 @@ public class MainActivity extends AppCompatActivity {
         mAdView.loadAd(adRequest);
         Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);
         setSupportActionBar(toolbar);
-        realm = Realm.getDefaultInstance();
-        reminders = realm.where(Reminder.class).findAll();
+        // TODO read reminders from db async
+        reminders = new ArrayList<>();
         handleEmptyState();
 
         RecyclerView rvReminders = (RecyclerView) findViewById(R.id.rvReminders);
@@ -90,8 +89,9 @@ public class MainActivity extends AppCompatActivity {
     @Override
     protected void onResume() {
         super.onResume();
-        if (realm != null && adapter != null) {
-            reminders = realm.where(Reminder.class).findAll();
+        if (adapter != null) {
+            //reminders = realm.where(Reminder.class).findAll();
+            // TODO re-read reminders from db
             adapter.notifyDataSetChanged();
             handleEmptyState();
         }
diff --git a/app/src/main/java/com/example/deveshwar/imalive/MessageComposerActivity.java b/app/src/main/java/com/example/deveshwar/imalive/MessageComposerActivity.java
index be5d6e5..01631c9 100644
--- a/app/src/main/java/com/example/deveshwar/imalive/MessageComposerActivity.java
+++ b/app/src/main/java/com/example/deveshwar/imalive/MessageComposerActivity.java
@@ -20,7 +20,6 @@ import android.widget.EditText;
 import android.widget.ImageView;
 
 import com.google.android.gms.common.ConnectionResult;
-
 import com.google.android.gms.common.GooglePlayServicesNotAvailableException;
 import com.google.android.gms.common.GooglePlayServicesRepairableException;
 import com.google.android.gms.common.api.GoogleApiClient;
@@ -43,13 +42,10 @@ import java.io.InputStreamReader;
 import java.net.HttpURLConnection;
 import java.net.URL;
 
-import io.realm.Realm;
-
 public class MessageComposerActivity extends AppCompatActivity implements GoogleApiClient
         .OnConnectionFailedListener {
 
     private static final int PLACE_PICKER_REQUEST = 1;
-    private Realm realm;
     private Bundle intentExtras;
     private FloatingActionButton sendMessageFAB;
     private EditText aliveMessage;
@@ -69,10 +65,11 @@ public class MessageComposerActivity extends AppCompatActivity implements Google
                 .enableAutoManage(this, this)
                 .build();
 
-        realm = Realm.getDefaultInstance();
         intentExtras = getIntent().getExtras();
 
-        reminder = realm.where(Reminder.class).equalTo("id", intentExtras.getInt("reminderId", -1)).findFirst();
+        // TODO get reminder by id
+        //reminder = realm.where(Reminder.class).equalTo("id", intentExtras.getInt("reminderId",
+        // -1)).findFirst();
 
         ImageView contactPhotoIv = (ImageView) findViewById(R.id.contact_photo);
         sendMessageFAB = (FloatingActionButton) findViewById(R.id.send_message_fab);
diff --git a/app/src/main/java/com/example/deveshwar/imalive/Reminder.java b/app/src/main/java/com/example/deveshwar/imalive/Reminder.java
index f87be68..054fb27 100644
--- a/app/src/main/java/com/example/deveshwar/imalive/Reminder.java
+++ b/app/src/main/java/com/example/deveshwar/imalive/Reminder.java
@@ -1,11 +1,7 @@
 package com.example.deveshwar.imalive;
 
-import io.realm.RealmObject;
-import io.realm.annotations.PrimaryKey;
+public class Reminder {
 
-public class Reminder extends RealmObject {
-
-    @PrimaryKey
     public int id;
     public String contactName;
     public String contactNumber;
diff --git a/app/src/main/java/com/example/deveshwar/imalive/ReminderComposerActivity.java b/app/src/main/java/com/example/deveshwar/imalive/ReminderComposerActivity.java
index 00d12c7..3ad0b0d 100644
--- a/app/src/main/java/com/example/deveshwar/imalive/ReminderComposerActivity.java
+++ b/app/src/main/java/com/example/deveshwar/imalive/ReminderComposerActivity.java
@@ -25,11 +25,8 @@ import org.json.JSONObject;
 
 import java.util.Calendar;
 
-import io.realm.Realm;
-
 public class ReminderComposerActivity extends AppCompatActivity {
 
-    private Realm realm;
     private Intent intentExtras;
     private FloatingActionButton saveReminderFAB;
     private static Button reminderTimePickerButton;
@@ -57,7 +54,6 @@ public class ReminderComposerActivity extends AppCompatActivity {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.activity_reminder_composer);
 
-        realm = Realm.getDefaultInstance();
         intentExtras = getIntent();
 
         ImageView contactPhotoIv = (ImageView) findViewById(R.id.contact_photo);
@@ -90,15 +86,14 @@ public class ReminderComposerActivity extends AppCompatActivity {
 
         if (intentExtras.hasExtra("reminderId")) {
             isEditing = true;
-            reminder = realm.where(Reminder.class).equalTo("id", intentExtras.getIntExtra("reminderId", -1)).findFirst();
+            //reminder = realm.where(Reminder.class).equalTo("id", intentExtras.getIntExtra
+            // ("reminderId", -1)).findFirst();
             if (reminder != null) {
                 reminderDeleteButton.setVisibility(View.VISIBLE);
                 reminderDeleteButton.setOnClickListener(new View.OnClickListener() {
                     @Override
                     public void onClick(View v) {
-                        realm.beginTransaction();
-                        reminder.removeFromRealm();
-                        realm.commitTransaction();
+                        // TODO delete reminder from db
                         finish();
                     }
                 });
@@ -154,10 +149,11 @@ public class ReminderComposerActivity extends AppCompatActivity {
             @Override
             public void onClick(View view) {
                 if (isMessageCompositionValid()) {
-                    realm.beginTransaction();
                     if (!isEditing) {
                         reminder = new Reminder();
-                        Number lastIndex = realm.where(Reminder.class).findAll().max("id");
+                        //realm.where(Reminder.class).findAll().max("id");
+                        // TODO read last object to get next insert key
+                        Number lastIndex = 0;
                         if (lastIndex == null) {
                             lastIndex = 0;
                         }
@@ -169,8 +165,7 @@ public class ReminderComposerActivity extends AppCompatActivity {
                     reminder.setText(reminderMessage.getText().toString());
                     reminder.setDeliveryTime(reminderDeliveryTime);
                     reminder.setDeliveryDays(getReminderDeliveryDays());
-                    realm.copyToRealmOrUpdate(reminder);
-                    realm.commitTransaction();
+                    // TODO write db object update code
 
                     String deliveryTime[] = reminder.getDeliveryTime().split(":");
                     int hour = Integer.parseInt(deliveryTime[0]);
diff --git a/app/src/main/java/com/example/deveshwar/imalive/RemindersAdapter.java b/app/src/main/java/com/example/deveshwar/imalive/RemindersAdapter.java
index 8657eda..4ef9517 100644
--- a/app/src/main/java/com/example/deveshwar/imalive/RemindersAdapter.java
+++ b/app/src/main/java/com/example/deveshwar/imalive/RemindersAdapter.java
@@ -14,20 +14,19 @@ import org.json.JSONException;
 import org.json.JSONObject;
 
 import java.util.Iterator;
+import java.util.List;
 import java.util.Locale;
 
-import io.realm.RealmResults;
 
-public class RemindersAdapter extends
-        RecyclerView.Adapter<RemindersAdapter.ViewHolder> {
+public class RemindersAdapter extends RecyclerView.Adapter<RemindersAdapter.ViewHolder> {
 
-    private static RealmResults<Reminder> mReminders;
+    private List<Reminder> mReminders;
 
-    public RemindersAdapter(RealmResults<Reminder> reminders) {
+    public RemindersAdapter(List<Reminder> reminders) {
         mReminders = reminders;
     }
 
-    public static class ViewHolder extends RecyclerView.ViewHolder implements View.OnClickListener, View.OnLongClickListener {
+    public static class ViewHolder extends RecyclerView.ViewHolder {
         public Context context;
         public TextView contactName;
         public ImageView contactPhoto;
@@ -43,26 +42,8 @@ public class RemindersAdapter extends
             reminderText = (TextView) itemView.findViewById(R.id.reminder_text);
             reminderDeliveryTime = (TextView) itemView.findViewById(R.id.reminder_delivery_time);
             reminderDeliveryDays = (TextView) itemView.findViewById(R.id.reminder_delivery_days);
-            itemView.setOnClickListener(this);
-            itemView.setOnLongClickListener(this);
         }
 
-        @Override
-        public void onClick(View v) {
-            Reminder reminder = mReminders.get(getLayoutPosition());
-            Intent intent = new Intent(context, ReminderComposerActivity.class);
-            intent.putExtra("reminderId", reminder.getId());
-            context.startActivity(intent);
-        }
-
-        @Override
-        public boolean onLongClick(View v) {
-            Reminder reminder = mReminders.get(getLayoutPosition());
-            Intent intent = new Intent(context, MessageComposerActivity.class);
-            intent.putExtra("reminderId", reminder.getId());
-            context.startActivity(intent);
-            return false;
-        }
     }
 
     @Override
@@ -75,9 +56,24 @@ public class RemindersAdapter extends
     }
 
     @Override
-    public void onBindViewHolder(RemindersAdapter.ViewHolder viewHolder, int position) {
+    public void onBindViewHolder(final RemindersAdapter.ViewHolder viewHolder, final int position) {
         Reminder reminder = mReminders.get(position);
 
+        viewHolder.itemView.setOnClickListener(new View.OnClickListener() {
+            @Override
+            public void onClick(View v) {
+                startActivityForPosition(position, viewHolder, ReminderComposerActivity.class);
+            }
+        });
+
+        viewHolder.itemView.setOnLongClickListener(new View.OnLongClickListener() {
+            @Override
+            public boolean onLongClick(View v) {
+                startActivityForPosition(position, viewHolder, MessageComposerActivity.class);
+                return true;
+            }
+        });
+
         viewHolder.contactName.setText(reminder.getContactName());
         viewHolder.reminderText.setText(reminder.getText());
 
@@ -112,4 +108,11 @@ public class RemindersAdapter extends
     public int getItemCount() {
         return mReminders.size();
     }
+
+    private void startActivityForPosition(int position, ViewHolder viewHolder, Class clazz) {
+        Reminder reminder = mReminders.get(position);
+        Intent intent = new Intent(viewHolder.context, clazz);
+        intent.putExtra("reminderId", reminder.getId());
+        viewHolder.context.startActivity(intent);
+    }
 }
\ No newline at end of file
diff --git a/build.gradle b/build.gradle
index ce2a049..a0acab9 100644
--- a/build.gradle
+++ b/build.gradle
@@ -6,7 +6,6 @@ buildscript {
     }
     dependencies {
         classpath 'com.android.tools.build:gradle:2.3.1'
-        classpath 'io.realm:realm-gradle-plugin:0.88.2'
         classpath 'com.google.gms:google-services:3.0.0'
 
         // NOTE: Do not place your application dependencies here; they belong
